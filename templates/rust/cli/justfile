# Modern Nix-Polyglot Justfile for Rust
# This file delegates to nix commands - updates automatically with flake updates

# Default recipe - shows available commands
default:
    @just --list

# Start development environment
dev:
    @echo "ğŸš€ Start development environment..."
    nix develop

# Build project
build:
    @echo "ğŸ”¨ Build project..."
    nix build

# Run project
run:
    @echo "â–¶ï¸  Run project..."
    nix run

# Run release version
release:
    @echo "ğŸ¯ Run release version..."
    nix run .#release

# Run all tests and checks
test:
    @echo "ğŸ§ª Run all tests and checks..."
    nix flake check

# Format all code
fmt:
    @echo "ğŸ¨ Format all code..."
    nix fmt

# Check formatting
fmt-check:
    @echo "ğŸ” Check formatting without changes..."
    nix fmt -- --fail-on-change

# Comprehensive check
check: build test fmt-check
    @echo "âœ… All checks passed!"

# Clean build artifacts
clean:
    @echo "ğŸ§¹ Clean build artifacts..."
    nix-collect-garbage && rm -rf result result-* target/

# Update dependencies
update:
    @echo "ğŸ“¦ Update all dependencies..."
    nix flake update

# Show project information
info:
    @echo "ğŸ“‹ Show project information..."
    nix flake show